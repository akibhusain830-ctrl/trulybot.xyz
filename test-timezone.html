<!DOCTYPE html>
<html>
<head>
    <title>Timezone Test</title>
</head>
<body>
    <h1>Timezone Detection Test</h1>
    <div id="results"></div>

    <script>
        // Test timezone detection
        const timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
        const language = navigator.language || navigator.languages?.[0] || '';
        
        // Simulate our detection logic
        let currency = 'USD'; // default
        let source = 'fallback';
        
        // Method 1: Timezone detection
        if (timezone === 'Asia/Kolkata' || timezone === 'Asia/Calcutta') {
            currency = 'INR';
            source = 'timezone';
        } else if (language.includes('hi') || language.includes('IN')) {
            currency = 'INR';
            source = 'language';
        }
        
        // Display results
        document.getElementById('results').innerHTML = `
            <h2>Detection Results:</h2>
            <p><strong>Timezone:</strong> ${timezone}</p>
            <p><strong>Language:</strong> ${language}</p>
            <p><strong>Detected Currency:</strong> ${currency}</p>
            <p><strong>Detection Source:</strong> ${source}</p>
            
            <h2>Expected Pricing:</h2>
            ${currency === 'INR' ? `
                <p>üáÆüá≥ <strong>Indian Pricing (INR):</strong></p>
                <ul>
                    <li>Basic: ‚Çπ99/month</li>
                    <li>Pro: ‚Çπ399/month</li>
                    <li>Ultra: ‚Çπ599/month</li>
                </ul>
            ` : `
                <p>üåç <strong>International Pricing (USD):</strong></p>
                <ul>
                    <li>Basic: $5/month</li>
<<<<<<< HEAD
                    <li>Pro: $10/month</li>
                    <li>Ultra: $15/month</li>
=======
                    <li>Pro: $15/month</li>
                    <li>Ultra: $30/month</li>
>>>>>>> afe65066d37e0367748c163325382d953fb420b4
                </ul>
            `}
        `;
        
        // Test API call
        fetch('/api/geolocation')
            .then(response => response.json())
            .then(data => {
                document.getElementById('results').innerHTML += `
                    <h2>Server API Results:</h2>
                    <p><strong>API Country:</strong> ${data.country || 'Not detected'}</p>
                    <p><strong>API Currency:</strong> ${data.currency || 'Not detected'}</p>
                    <p><strong>API Source:</strong> ${data.source || 'Not detected'}</p>
                `;
            })
            .catch(error => {
                document.getElementById('results').innerHTML += `
                    <h2>Server API Results:</h2>
                    <p><strong>API Error:</strong> ${error.message}</p>
                `;
            });
    </script>
</body>
</html>